name: Bot Prosperidad Divina - Ejecuci√≥n Aleatoria

on:
  schedule:
    - cron: '40 6 * * *'
    - cron: '10 7 * * *'
    - cron: '27 8 * * *'
    - cron: '3 9 * * *'
    - cron: '34 10 * * *'
    - cron: '12 11 * * *'
    - cron: '9 12 * * *'
    - cron: '12 13 * * *'
    - cron: '42 14 * * *'
    - cron: '50 15 * * *'
    - cron: '56 16 * * *'
    - cron: '40 17 * * *'
    - cron: '35 18 * * *'
    - cron: '11 19 * * *'
    - cron: '59 20 * * *'
    - cron: '42 21 * * *'
    - cron: '9 22 * * *'
    - cron: '3 23 * * *'
    - cron: '57 0 * * *'
    - cron: '14 1 * * *'
  workflow_dispatch:

permissions:
  contents: write
  actions: read

jobs:
  ejecutar-bot:
    runs-on: ubuntu-latest
    steps:
    - name: Checkout
      uses: actions/checkout@v4
      
    - name: Setup Python
      uses: actions/setup-python@v4
      with:
        python-version: '3.9'
        
    - name: Install dependencies
      run: |
        pip install google-generativeai google-auth google-auth-oauthlib google-api-python-client python-dateutil
        
    - name: Ejecutar Bot (5 comentarios exactos)
      env:
        GEMINI_API_KEY: AIzaSyAet7CWrWUtBdq5dX8GMcyuvfRaSZQ389g
        YOUTUBE_CREDENTIALS_COMMENTS: {
  "token": "ya29.a0AS3H6NxiefT8FdjjF2fECy6PZdGUghGXqPD8WOwbbNiVRfMeCq1Bs_MAQXG4d5G-OPRhs6iyQrgbWQrz1JGsauxUrW6Y-945DCFmJ08m9XAyqizZBi-tUbkaQHK0c_N4-GMgxw60FXG_JhlW7Bontopuz4tQgnnqBXPC5X1vXA_A60HsWrub3eBSt9Eva2rVBrKEil4aCgYKAcASARISFQHGX2MidHrae49U7tcaUf7SH6wipw0206",
  "refresh_token": "1//01viCn-DvUDhZCgYIARAAGAESNwF-L9IrW7kiSEGa91C7zpZ3sreMizmxmnm3_fVcy02L2PJ_3TvA0mhDwe30N1sgo_j_nhoPZw0",
  "token_uri": "https://oauth2.googleapis.com/token",
  "client_id": "370965148704-2uvfjhi8quhrohgle4cfprsjqkcjm2g1.apps.googleusercontent.com",
  "client_secret": "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",
  "scopes": [
    "https://www.googleapis.com/auth/youtube.force-ssl"
  ]
}
      run: |
        echo "Ejecutando bot: 5 comentarios exactos"
        echo "Horario aleatorio: $(date +'%H:%M')"
        python bot_prosperidad_divina.py
        
    - name: Guardar cambios
      run: |
        git config --local user.email "action@github.com"
        git config --local user.name "Bot 6000pts"
        git add .
        if ! git diff --staged --quiet; then
          git commit -m "6000pts - $(date +'%d/%m %H:%M') - 5 comentarios"
          git push origin main || git push --force-with-lease origin main
        fi
